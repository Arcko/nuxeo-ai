<?xml version="1.0"?>
<component name="org.nuxeo.ai.bulk.services" version="1.0">

  <extension target="org.nuxeo.ecm.core.bulk" point="actions">
    <action name="bulkDatasetExport" bucketSize="100" batchSize="20" />
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <streamProcessor name="bulkExport" class="org.nuxeo.ai.bulk.DataSetBulkAction" logConfig="bulk"
                     defaultConcurrency="1" defaultPartitions="1">
      <option name="training_batchSize">200</option>
      <option name="training_batchThresholdMs">5000</option>
      <option name="validation_batchSize">100</option>
      <option name="validation_batchThresholdMs">3000</option>
    </streamProcessor>
  </extension>

  <extension target="org.nuxeo.ecm.core.event.EventServiceComponent" point="listener">
    <listener name="dataSetExportDoneListener" async="true" postCommit="true"
              class="org.nuxeo.ai.bulk.DataSetExportDoneListener">
      <event>DATASET_EXPORT_DONE_EVENT</event>
    </listener>
  </extension>
</component>
