<?xml version="1.0"?>
<component name="org.nuxeo.enrichment.test" version="1.0">

  <extension point="enrichment" target="org.nuxeo.ai.services.AIComponent">
    <enrichment name="custom1" kind="/classification/custom" class="org.nuxeo.ai.custom.CustomModelEnrichmentService">
      <option name="uri">http://localhost:7000/invocations</option>
      <option name="modelName">dnn</option>
      <option name="imageFeatureName">image</option>
      <option name="textFeatureName">text</option>
      <option name="minConfidence">0.55</option>
    </enrichment>
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <streamProcessor name="customProcessor" logConfig="${nuxeo.pipes.config.name}" defaultConcurrency="1" defaultPartitions="1"
                     class="org.nuxeo.ai.enrichment.EnrichingStreamProcessor">
      <option name="source">images</option>
      <option name="sink">enrichment.in</option>
      <option name="enrichmentServiceName">custom1</option>
    </streamProcessor>
  </extension>
</component>